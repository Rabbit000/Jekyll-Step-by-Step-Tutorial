<h1>Jeyll_step_by_step_tutorial</h1>
<p>16 Aug 2019
  
  
    - <a href="/authors/jill.html">Jill Smith</a>
  
</p>

<h2 id="setup">Setup</h2>

<h3 id="1-创建-git-仓库">1. 创建 Git 仓库</h3>
<p><img src="/assets/images/start_a_project.png" alt="Start a project" title="Start a project" /></p>

<p><img src="/assets/images/create_new_repository.png" alt="Create a new repository" title="Create a new repository" /></p>

<h3 id="2-创建本地仓库">2. 创建本地仓库</h3>
<ul>
  <li>打开 Git Bash
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git clone git@github.com:&lt;your-git-username&gt;/Jekyll-demo.git
</code></pre></div>    </div>
    <p><img src="/assets/images/clone_repository.png" alt="Create local repository" title="Create local repository" /></p>
  </li>
</ul>

<h3 id="3-安装">3. 安装</h3>
<ul>
  <li>安装Ruby (此处提供windows安装)</li>
  <li>创建 Gemfile
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ bundle init
</code></pre></div>    </div>
    <p><img src="/assets/images/bundle_init.png" alt="Create Gemfile" title="Create Gemfile" /></p>
  </li>
  <li>编辑 Gemfile
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Gemfile文末追加 gem "jekyll"
$ echo "gem \"jekyll\"" &gt;&gt; Gemfile
# 为你的项目安装jekyll, 会生成Gemfile.lock文件，里面包含了一些库的版本信息
$ bundle
</code></pre></div>    </div>
    <p><img src="/assets/images/gemfile.png" alt="Show Gemfile" title="Show Gemfile" /></p>
  </li>
</ul>

<blockquote>
  <p><strong><em>后面的命令以bundle exec开头，确保使用Gemfile.lock 里定义的jekyll版本</em></strong></p>
</blockquote>

<h3 id="4-创建网站">4. 创建网站</h3>
<ul>
  <li>创建 index.html 文件
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim index.html
</code></pre></div>    </div>
  </li>
</ul>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;title&gt;</span>Home<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Hello World!<span class="nt">&lt;/h1&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<h3 id="5-编译">5. 编译</h3>
<ul>
  <li>编译网站，自动创建_site目录，包含静态网站内容
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ bundle exec jekyll build
</code></pre></div>    </div>
    <p><img src="/assets/images/bundle_exec_jekyll_build.png" alt="build" title="build" /></p>
  </li>
  <li>本地运行, 浏览器查看效果 http://localhost:4000
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ bundle exec jekyll serve
</code></pre></div>    </div>
    <p><img src="/assets/images/bundle_exec_jekyll_serve.png" alt="execute" title="execute" /></p>
  </li>
</ul>

<h2 id="liquid">Liquid</h2>

<h3 id="1-介绍">1. 介绍</h3>
<blockquote>
  <p>Liquid 是一门开源的模版语言，包括三个主要部分：对象（objects）, 标记（tags）和过滤器（filters）。</p>
</blockquote>

<h3 id="2-对象objects">2. 对象（Objects）</h3>
<blockquote>
  <p>告诉 Liquid 在哪输出内容，由双花括号标识：{{ 和 }}。</p>
</blockquote>

<blockquote>
  <p>如：
{{ page.title }}
页面输出 page.title 的内容</p>
</blockquote>

<h3 id="3-标记tags">3. 标记（Tags）</h3>
<blockquote>
  <p>创建模版的逻辑和控制流，由单括号+百分号标识： {<code class="highlighter-rouge">%</code> 和 <code class="highlighter-rouge">%</code>}。</p>
</blockquote>

<blockquote>
  <p>如：(<em>去掉 { % 之间的空格</em>)</p>
</blockquote>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	{ % if page.show_sidebar % }
	&lt;div class="sidebar"&gt;
		sidebar content
	&lt;/div&gt;
	{ % endif % }
</code></pre></div></div>

<blockquote>
  <p>如果条件page.show_sidebar为true,输出条件语句之间的内容。</p>
</blockquote>

<h3 id="4-过滤器filters">4. 过滤器（filters）</h3>
<blockquote>
  <table>
    <tbody>
      <tr>
        <td>改变Liquid对象的输出格式，由</td>
        <td>符号分割。</td>
      </tr>
    </tbody>
  </table>
</blockquote>

<blockquote>
  <p>如：(<em>去掉大括号之间的空格</em>)</p>
</blockquote>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	{ { "hi" | capitalize } }
</code></pre></div></div>

<blockquote>
  <p>页面输出 Hi</p>
</blockquote>

<blockquote>
  <p>更多详细内容查看 <a href="https://jekyllrb.com/docs/liquid/filters/">Liquid filters</a></p>
</blockquote>

<blockquote>
  <p>或参考中文网站<a href="https://liquid.bootcss.com/">Liquid filters</a></p>
</blockquote>

<h3 id="5-上手操作">5. 上手操作</h3>
<blockquote>
  <p>修改index.html里的内容，刷新看结果</p>
</blockquote>

<blockquote>
  <p>Jekll识别Liquid需要在文件顶部加上front matter, 三短线标识</p>
</blockquote>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	…
	&lt;h1&gt;{ { "Hello World!" | downcase } }&lt;/h1&gt;
	…
</code></pre></div></div>

<h2 id="front-matter">Front Matter</h2>

<h3 id="1-front-matter-是yaml语言的一个片段包含在两行三短划线之间">1. Front matter 是YAML语言的一个片段，包含在两行三短划线之间。</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	---
	my_number: 5 
	---
</code></pre></div></div>

<h3 id="2-上手操作">2. 上手操作</h3>

<blockquote>
  <p>修改index.html</p>
</blockquote>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	---
	title: Home
	---
	<span class="cp">&lt;!doctype html&gt;</span>
	<span class="nt">&lt;html&gt;</span>
	  <span class="nt">&lt;head&gt;</span>
	    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
	    <span class="nt">&lt;title&gt;</span>Jeyll_step_by_step_tutorial<span class="nt">&lt;/title&gt;</span>
	  <span class="nt">&lt;/head&gt;</span>
	  <span class="nt">&lt;body&gt;</span>
	    <span class="nt">&lt;h1&gt;</span>hello world!<span class="nt">&lt;/h1&gt;</span>
	  <span class="nt">&lt;/body&gt;</span>
	<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<h2 id="layouts">Layouts</h2>

<p>Jekyll 同时支持 Markdown 文件</p>

<h3 id="1-在根路径下创建-aboutmd-文件">1. 在根路径下创建 about.md 文件</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ echo "" &gt;&gt; about.md
</code></pre></div></div>

<h3 id="2-创建-layout">2. 创建 layout</h3>

<p>Layouts模版 放置在 _layouts目录下</p>

<p>创建_layouts/default.html(<em>去掉大括号之间的空格</em>)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
	<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;title&gt;</span>{ { page.title } }<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
	{ { content } }
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mkdir _layouts
$ vim _layouts/default.html 
# 复制上面内容到default.html
# 在index.html里使用default layout
</code></pre></div></div>

<p><img src="/assets/images/hello_world.png" alt="hello_world" title="hello_world" /></p>

<h3 id="3-复制下面内容到aboutmd">3. 复制下面内容到about.md</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim about.md
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: default
title: About
---
# About page

This page tells you a little bit about me.
</code></pre></div></div>

<p>访问 http://localhost:4000/about.html</p>

<p><img src="/assets/images/about_page.png" alt="about_page" title="about_page" /></p>

<h3 id="tips">Tips:</h3>
<blockquote>
  <ol>
    <li>页面使用_layout里定义的模版，网页内容通过Front Matter的方式嵌入到模版的{{ content }} 之中。</li>
    <li>Markdown文件可替换html文件。</li>
  </ol>
</blockquote>

<h2 id="includes">Includes</h2>

<h3 id="1-介绍-1">1. 介绍</h3>

<p>之前建立了2个网站，需要导航，这里引入 include 标签.</p>

<p>include 的作用是从_includes目录下的文件中引入其内容</p>

<h3 id="2-上手操作-1">2. 上手操作</h3>
<p>创建导航文件 _includes/navigation.html</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mkdir _includes
$ vim _includes/navigation.html
&lt;nav&gt;
  &lt;a href="/"&gt;Home&lt;/a&gt;
  &lt;a href="/about.html"&gt;About&lt;/a&gt;
&lt;/nav&gt;
</code></pre></div></div>

<p>将导航文件引入到<code class="highlighter-rouge">_layouts/default.html</code>模版文件中(<em>去掉大括号之间的空格</em>)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim _layouts/default.html
<span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
	<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;title&gt;</span>Jeyll_step_by_step_tutorial<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
	{ % include navigation.html %}
	{ { content }}
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p>访问 http://localhost:4000</p>

<p><img src="/assets/images/include_navigation.png" alt="include_navigation" title="include_navigation" /></p>

<p><img src="/assets/images/include_navigation2.png" alt="include_navigation2" title="include_navigation2" /></p>

<h3 id="3-高亮当前页面">3. 高亮当前页面</h3>

<p>page.url 是当前页面的相对路径</p>

<p>修改导航文件 navigation.html (<em>去掉{ %之间的空格</em>)</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim _includes/navigation.html
&lt;nav&gt;
  &lt;a href="/" { % if page.url == "/" %}style="color: red;"{ % endif %}&gt;
	Home
  &lt;/a&gt;
  &lt;a href="/about.html" { % if page.url == "/about.html" %}style="color: red;"{ % endif %}&gt;
	About
  &lt;/a&gt;
&lt;/nav&gt;
</code></pre></div></div>

<p><img src="/assets/images/highlight.png" alt="highlight" title="highlight" /></p>

<h2 id="data-files">Data Files</h2>

<h3 id="1-介绍-2">1. 介绍</h3>
<p>Jekyll支持从_data目录下的YAML, JSON, CSV文件里加载数据</p>

<h3 id="2-上手操作-2">2. 上手操作</h3>
<p>这里使用YAML 文件来存储导航内容（包含name 和 link）</p>

<p>在_data目录下创建数据文件 navigation.yml</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mkdir _data
$ vim _data/navigation.yml
- name: GoToHome
  link: /
- name: GoToAbout
  link: /about.html
</code></pre></div></div>

<p>通过 site.data.navigation 存储导航内容，通过变量指代的方式引用其数据。(<em>去掉{ %之间的空格</em>)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim _includes/navigation.html
&lt;nav&gt;
  { % for item in site.data.navigation %}
	&lt;a href="{ { item.link }}" { % if page.url == item.link %}style="color: red;"{ % endif %}&gt;
	  { { item.name }}
	&lt;/a&gt;
  { % endfor %}
&lt;/nav&gt;
</code></pre></div></div>

<p><img src="/assets/images/navigation_template.png" alt="navigation_template" title="navigation_template" /></p>

<h3 id="tips-1">Tips:</h3>

<blockquote>
  <p>_includes/navigation.html</p>
</blockquote>

<blockquote>
  <p>只需要写导航的逻辑结构，其内容写在_data/navigation.yml中并存储在集合site.data.<name_of_yml>里，通过变量引用集合里的值。</name_of_yml></p>
</blockquote>

<h2 id="assets">Assets</h2>

<h3 id="1-介绍-3">1. 介绍</h3>
<p>assets目录存放CSS，JS, images等网站资源</p>

<h3 id="2-上手操作-3">2. 上手操作</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mkdir assets
$ cd assets
$ mkdir css
$ mkdir images
$ mkdir js
</code></pre></div></div>

<p>查看目录结构，Git Bash使用cmd的 tree命令,  tree /F 显示文件夹及其文件</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cmd //c tree //F
</code></pre></div></div>

<p><img src="/assets/images/cmd_c_tree_f.png" alt="cmd_c_tree_f" title="cmd_c_tree_f" /></p>

<p>使用 Sass 来显示样式</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim _includes/navigation.html
&lt;nav&gt;
  { % for item in site.data.navigation %}
	&lt;a href="{ { item.link }}" { % if page.url == item.link %}class="current"{ % endif %}&gt;{ { item.name }}&lt;/a&gt;
  { % endfor %}
&lt;/nav&gt;
</code></pre></div></div>

<p>在目录/assets/css/下创建Sass文件 styles.scss</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">$</span> vim assets/css/styles.scss
<span class="p">---
---
</span><span class="err">@import</span> "main";
</code></pre></div></div>

<p>import “main”指导入根路径下的_sass/ 目录下的main.scss文件</p>

<p>创建main.scss文件</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mkdir _sass
$ vim _sass/main.scss
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.current {
  color: green;
}
</code></pre></div></div>

<p>在模版的&lt;head&gt;里引入样式表</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim _layouts/default.html
</code></pre></div></div>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
	<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;title&gt;</span>{ { page.title }}<span class="nt">&lt;/title&gt;</span>
	<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"/assets/css/styles.css"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
	{ % include navigation.html %}
	{ { content }}
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p>刷新 http://localhost:4000 查看效果</p>

<p><img src="/assets/images/styles_show.png" alt="styles_show" title="styles_show" /></p>

<h3 id="tips-2">Tips:</h3>

<blockquote>
  <p>_sass/目录下存css内容</p>
</blockquote>

<blockquote>
  <p>assets/css/目录下 @import css内容</p>
</blockquote>

<blockquote>
  <p>模版&lt;head&gt;通过<link /> 呈现样式</p>
</blockquote>

<blockquote>
  <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. _layouts模版&lt;head&gt;里引入样式表stylesheet, &lt;link rel="stylesheet" href="/assets/css/&lt;filename&gt;.scss"&gt;
2. 样式表放在assets/css/目录下styles.scss
3. css内容在_sass/目录下main.scss，并通过@import “&lt;scss_file_name&gt;” 导入到styles.scss里
</code></pre></div>  </div>
</blockquote>

<h2 id="blogging">Blogging</h2>

<h3 id="1-介绍-4">1. 介绍</h3>

<p>博客只由text文件驱动。</p>

<p>存放在_posts/目录下</p>

<p>博客文件命名规则：<code class="highlighter-rouge">yyyy-mm-dd-&lt;title&gt;.md</code></p>

<h3 id="2-上手操作-4">2. 上手操作</h3>

<p>在_posts/目录下创建帖子</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mkdir _posts
$ vim _posts/2019-08-09-bananas.md
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: post
author: jill
---
A banana is an edible fruit – botanically a berry – produced by several kinds
of large herbaceous flowering plants in the genus Musa.

In some countries, bananas used for cooking may be called "plantains",
distinguishing them from dessert bananas. The fruit is variable in size, color,
and firmness, but is usually elongated and curved, with soft flesh rich in
starch covered with a rind, which may be green, yellow, red, purple, or brown
when ripe.
</code></pre></div></div>

<p>md文件需要有front matter ，layout 及其他非必须变量（title, author）</p>

<p>创建对应的layout: post</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim _layouts/post.html
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: default
---
&lt;h1&gt;{ { page.title }}&lt;/h1&gt;
&lt;p&gt;{ { page.date | date_to_string }} - { { page.author }}&lt;/p&gt;

{ { content }}
</code></pre></div></div>

<p>这里的{ { content }}指代调用该模版的文件的内容，这里指博客帖子的内容</p>

<p>page 可能指代全局变量</p>

<p>site.posts 存储post文件</p>

<p>创建blog.html 主页面</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim blog.html
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: default
title: Blog
---
&lt;h1&gt;Latest Posts&lt;/h1&gt;

&lt;ul&gt;
  { % for post in site.posts %}
	&lt;li&gt;
	  &lt;h2&gt;&lt;a href="{ { post.url }}"&gt;{ { post.title }}&lt;/a&gt;&lt;/h2&gt;
	  &lt;p&gt;{ { post.excerpt }}&lt;/p&gt;
	&lt;/li&gt;
  { % endfor %}
&lt;/ul&gt;
</code></pre></div></div>

<p>post.excerpt 指代default 的第一段内容</p>

<p>在导航数据里加上Blog导航栏</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim _data/navigation.yml
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- name: Home
  link: /
- name: About
  link: /about.html
- name: Blog
  link: /blog.html
</code></pre></div></div>

<p>多创建几个post</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim _posts/2018-08-20-apples.md
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: post
author: jill
---
An apple is a sweet, edible fruit produced by an apple tree.

Apple trees are cultivated worldwide, and are the most widely grown species in
the genus Malus. The tree originated in Central Asia, where its wild ancestor,
Malus sieversii, is still found today. Apples have been grown for thousands of
years in Asia and Europe, and were brought to North America by European
colonists.
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim _posts/2019-07-21-kiwifruit.md
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: post
author: ted
---
Kiwifruit (often abbreviated as kiwi), or Chinese gooseberry is the edible
berry of several species of woody vines in the genus Actinidia.

The most common cultivar group of kiwifruit is oval, about the size of a large
hen's egg (5–8 cm (2.0–3.1 in) in length and 4.5–5.5 cm (1.8–2.2 in) in
diameter). It has a fibrous, dull greenish-brown skin and bright green or
golden flesh with rows of tiny, black, edible seeds. The fruit has a soft
texture, with a sweet and unique flavor.
</code></pre></div></div>

<p>刷新页面查看效果</p>

<p><img src="/assets/images/posts.png" alt="posts" title="posts" /></p>

<h3 id="tips-3">Tips:</h3>
<blockquote>
  <ol>
    <li>layout: <layout_file_name> 冒号和文件名之间必须要有个空格，否则不生效</layout_file_name></li>
    <li>文章的内容编码要是UTF-8格式，否则报invalid byte sequence in UTF-8</li>
    <li>由于之前Git Bash中文乱码问题，设置Git Bash为GBK格式，所以复制内容时-的格式不正确。</li>
  </ol>
</blockquote>

<h2 id="collections">Collections</h2>

<h3 id="1-介绍-5">1. 介绍</h3>

<p>Collections 跟post类似，不需要按时间排序，充实作者，使其拥有自己的简介和博文。</p>

<h3 id="2-上手操作-5">2. 上手操作</h3>

<p>Jekyll的配置文件默认为_config.yml文件</p>

<p>根目录下创建_config.yml配置文件</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim _config.yml
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>collections:
  authors:
</code></pre></div></div>

<p>该配置需要重启jekyll server</p>

<p>Ctrl+C终止服务，并重启</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ bundle exec jekyll serve
</code></pre></div></div>

<p>文档（collection的元素）存在根路径下的<code class="highlighter-rouge">_&lt;collecion_name&gt;</code>文件夹中，这里为_authors</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mkdir _authors
</code></pre></div></div>

<p>为每个作者创建一个文档</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim _authors/jill.md
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
short_name: jill
name: Jill Smith
position: Chief Editor
---
Jill is an avid fruit grower based in the south of France.
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim _authors/ted.md
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
short_name: ted
name: Ted Doe
position: Writer
---
Ted has been eating fruit since he was baby.
</code></pre></div></div>

<p>创建模版列举作者信息, 作者信息包含在 site.authors集合里</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim staff.html
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: default
title: Staff
---
&lt;h1&gt;Staff&lt;/h1&gt;

&lt;ul&gt;
  { % for author in site.authors %}
	&lt;li&gt;
	  &lt;h2&gt;{ { author.name }}&lt;/h2&gt;
	  &lt;h3&gt;{ { author.position }}&lt;/h3&gt;
	  &lt;p&gt;{ { author.content | markdownify }}&lt;/p&gt;
	&lt;/li&gt;
  { % endfor %}
&lt;/ul&gt;
</code></pre></div></div>

<p>通过markdownify过滤器来执行当前内容，并自动在包含{ { content }}的layout中输出</p>

<p>导航数据中加入 staff</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim _data/navigation.yml
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- name: Home
  link: /
- name: About
  link: /about.html
- name: Blog
  link: /blog.html
- name: Staff
  link: /staff.html
</code></pre></div></div>

<p>每个作者拥有自己的网页, 默认不自动输出</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim _config.yml
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>collections:
  authors:
	output: true 
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim staff.html
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: default
---
&lt;h1&gt;Staff&lt;/h1&gt;

&lt;ul&gt;
  { % for author in site.authors %}
	&lt;li&gt;
	  &lt;h2&gt;&lt;a href="{ { author.url }}"&gt;{ { author.name }}&lt;/a&gt;&lt;/h2&gt;
	  &lt;h3&gt;{ { author.position }}&lt;/h3&gt;
	  &lt;p&gt;{ { author.content | markdownify }}&lt;/p&gt;
	&lt;/li&gt;
  { % endfor %}
&lt;/ul&gt;
</code></pre></div></div>

<p>创建作者模版</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim _layouts/author.html
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: default
---
&lt;h1&gt;{ { page.name }}&lt;/h1&gt;
&lt;h2&gt;{ { page.position }}&lt;/h2&gt;

{ { content }}
</code></pre></div></div>

<p>让作者文档使用layouts</p>

<p>配置 front matter defaults, 指定对应的集合用对应的layout, 默认的使用default</p>

<p>type 表示的是集合， layout 表示对应的layout页面，其他front matter 里的layouts可以注释掉。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim _config.yml
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>collections:
  authors:
	output: true

defaults:
  - scope:
	  path: ""
	  type: "authors"
	values:
	  layout: "author"
  - scope:
	  path: ""
	  type: "posts"
	values:
	  layout: "post"
  - scope:
	  path: ""
	values:
	  layout: "default"
</code></pre></div></div>

<p>列举作者的博文</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim _layouts/author.html
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: default
---
&lt;h1&gt;{ { page.name }}&lt;/h1&gt;
&lt;h2&gt;{ { page.position }}&lt;/h2&gt;

{ { content }}

&lt;h2&gt;Posts&lt;/h2&gt;
&lt;ul&gt;
  { % assign filtered_posts = site.posts | where: 'author', page.short_name %}
  { % for post in filtered_posts %}
	&lt;li&gt;&lt;a href="{ { post.url }}"&gt;{ { post.title }}&lt;/a&gt;&lt;/li&gt;
  { % endfor %}
&lt;/ul&gt;
</code></pre></div></div>

<p>超链接到作者信息页面</p>

<p>修改post模版</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim _layouts/post.html
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: default
---
&lt;h1&gt;{ { page.title }}&lt;/h1&gt;

&lt;p&gt;
  { { page.date | date_to_string }}
  { % assign author = site.authors | where: 'short_name', page.author | first %}
  { % if author %}
	- &lt;a href="{ { author.url }}"&gt;{ { author.name }}&lt;/a&gt;
  { % endif %}
&lt;/p&gt;

{ { content }}
</code></pre></div></div>

<p>http://localhost:4000 查看效果</p>

<h2 id="develoyment">Develoyment</h2>

<h3 id="1-介绍-6">1. 介绍</h3>

<p>Gemfile 确保了Jekyll和其他gem的版本在不同的环境中保持一致。</p>

<h3 id="2-上手操作-6">2. 上手操作</h3>

<p>根目录下创建 Gemfile</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim Gemfile
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>source 'https://rubygems.org'

gem 'jekyll'
</code></pre></div></div>

<p>安装gems 并创建 Gemfile.lock文件（锁定当前gem版本）</p>

<p>如果要更新gem版本，可以使用 bundle update命令</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ bundle install
</code></pre></div></div>

<p>使用Gemfile文件，确保只使用 Gemfile里设置的gems</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ bundle exec jekyll serve 
</code></pre></div></div>

<h3 id="3-官方插件">3. 官方插件</h3>

<p>jekyll-sitemap 创建sitemap帮助搜索引擎索引内容, 在编译时创建sitemap</p>

<p>jekyll-feed 为您的文章创建一个RSS源需要在_layouts/defaut.html 的<code class="highlighter-rouge">&lt;head&gt;</code>里添加标签{ % feed_meta %}</p>

<p>jekyll-seo-tag 添加元标签，以帮助搜索引擎优化需要在_layouts/defaut.html 的&lt;head&gt;里添加标签{ % seo %}</p>

<p>使用插件前需要加入到Gemfile</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>source 'https://rubygems.org'

gem 'jekyll'

group :jekyll_plugins do
  gem 'jekyll-sitemap'
  gem 'jekyll-feed'
  gem 'jekyll-seo-tag'
end
</code></pre></div></div>

<p>并且在_config.yml配置</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>plugins:
  - jekyll-feed
  - jekyll-sitemap
  - jekyll-seo-tag
</code></pre></div></div>

<h3 id="4-上手操作">4. 上手操作</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ bundle update
$ vim _layouts/defaut.html
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
	<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;title&gt;</span>{ { page.title }}<span class="nt">&lt;/title&gt;</span>
	<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"/assets/css/styles.css"</span><span class="nt">&gt;</span>
	{ % feed_meta %}
	{ % seo %}
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
	{ % include navigation.html %}
	{ { content }}
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>


